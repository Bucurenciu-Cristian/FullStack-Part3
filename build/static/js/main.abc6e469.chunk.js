(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(16),u=n.n(a),i=n(4),o=n(3),d=n(5),l=n.n(d),s="https://shrouded-brushlands-62076.herokuapp.com/api/persons",b={create:function(e){return l.a.post(s,e).then((function(e){return e.data}))},getAll:function(){return l.a.get(s).then((function(e){return e.data}))},deleting:function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(t){return t.data=e,t.data}))},update:function(e,t){return l.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))}},j=n(0),h=function(e){var t=e.message;if(null===t)return null;var n={color:"green",background:"lightgrey",fontStyle:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},r=Object(o.a)(Object(o.a)({},n),{},{color:"blue",background:"aqua"}),c=Object(o.a)(Object(o.a)({},r),{},{color:"red",background:"pink"});return-1!==t.search("Added")?Object(j.jsx)("div",{style:r,children:t}):-1!==t.search("deleted")?Object(j.jsx)("div",{style:c,children:t}):Object(j.jsx)("div",{style:n,children:t})},f=function(e){var t=e.text,n=e.number,r=e.id,c=e.deleteButton;return Object(j.jsxs)("li",{children:[t," ",n,Object(j.jsx)(m,{id:r,deleteButton:c})]})},m=function(e){var t=e.id,n=e.deleteButton;return Object(j.jsx)("button",{onClick:function(){return n(t)},children:"Delete"})},O=function(e){var t=e.handleFilterChange,n=e.filterName;return Object(j.jsxs)(j.Fragment,{children:["filter shown with ",Object(j.jsx)("input",{value:n,onChange:t})]})},p=function(e){var t=e.addPersons,n=e.newName,r=e.handleNameChange,c=e.newNumber,a=e.handleNumberChange;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:n,onChange:r,required:!0}),Object(j.jsx)("br",{})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{type:"tel",value:c,onChange:a,required:!0})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var t,n=e.persons,r=e.filterName,c=e.deleteButton,a=n.map((function(e){return e.name})),u=(t=r,a.filter((function(e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())}))),i=n.filter((function(e){if(u.includes(e.name))return e.name}));return Object(j.jsx)("ol",{children:i.map((function(e){return Object(j.jsx)(f,{id:e.id,text:e.name,number:e.number,deleteButton:c},e.id)}))})},g=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),u=Object(i.a)(a,2),d=u[0],l=u[1],s=Object(r.useState)(""),f=Object(i.a)(s,2),m=f[0],g=f[1],v=Object(r.useState)(""),w=Object(i.a)(v,2),y=w[0],N=w[1],k=Object(r.useState)(null),C=Object(i.a)(k,2),S=C[0],B=C[1];Object(r.useEffect)((function(){b.getAll().then((function(e){return c(e)}))}),[]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(h,{message:S}),Object(j.jsx)(O,{filterName:y,handleFilterChange:function(e){var t=e.target;return N(t.value)}}),Object(j.jsx)("h3",{children:"Add a new contact"}),Object(j.jsxs)("h4",{children:["input result: ",y]}),Object(j.jsx)(p,{addPersons:function(e){e.preventDefault();var t={name:d,number:m,id:n.length+1},r=n.filter((function(e){return e.name===d}));if(0===r.length)b.create(t).then((function(e){c(n.concat(e)),l(""),g(""),B("Added '".concat(e.name,"'")),setTimeout((function(){B(null)}),5e3)}));else if(window.confirm("".concat(r[0].name," is already added to phonebook,replace the old number with a new one?"))){var a=r[0].id,u=n.find((function(e){return e.id===a})),i=Object(o.a)(Object(o.a)({},u),{},{number:m});b.update(a,i).then((function(e){c(n.map((function(t){return t.id!==a?t:e}))),B("Updated '".concat(i.name,"' to ").concat(i.number)),setTimeout((function(){B(null)}),5e3)})).catch((function(e){c(n.filter((function(e){return e.id!==a})))}))}},handleNameChange:function(e){var t=e.target;return l(t.value)},handleNumberChange:function(e){var t=e.target;return g(t.value)},newName:d,newNumber:m}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(x,{persons:n,setPersons:c,filterName:y,deleteButton:function(e){window.confirm("Do you really want to delete this entry?")&&b.deleting(e).then((function(e){c(n.filter((function(t){return t.id!==e})))})).catch((function(t){B("This entry was already deleted"),setTimeout((function(){B(null)}),5e3),c(n.filter((function(t){return t.id!==e})))}))}})]})};u.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.abc6e469.chunk.js.map